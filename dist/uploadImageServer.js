(this["webpackJsonp"] = this["webpackJsonp"] || []).push([["uploadImageServer"],{

/***/ "./src/controllers/UploadImg.js":
/*!**************************************!*\
  !*** ./src/controllers/UploadImg.js ***!
  \**************************************/
/*! exports provided: UploadImg */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"UploadImg\", function() { return UploadImg; });\n/* harmony import */ var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es6.object.assign */ \"./node_modules/core-js/modules/es6.object.assign.js\");\n/* harmony import */ var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! regenerator-runtime/runtime */ \"./node_modules/regenerator-runtime/runtime.js\");\n/* harmony import */ var regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var D_github_mall3_0_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\");\n/* harmony import */ var D_github_mall3_0_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/classCallCheck */ \"./node_modules/@babel/runtime/helpers/esm/classCallCheck.js\");\n/* harmony import */ var D_github_mall3_0_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/createClass */ \"./node_modules/@babel/runtime/helpers/esm/createClass.js\");\n/* harmony import */ var D_github_mall3_0_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/defineProperty */ \"./node_modules/@babel/runtime/helpers/esm/defineProperty.js\");\n/* harmony import */ var core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es6.regexp.match */ \"./node_modules/core-js/modules/es6.regexp.match.js\");\n/* harmony import */ var core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _wechat__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./wechat */ \"./src/controllers/wechat.js\");\n/* harmony import */ var _controllers_fileUpload__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/controllers/fileUpload */ \"./src/controllers/fileUpload.js\");\n\n\n\n\n\n\n\n\n/* eslint-disable */\n\n\nvar u = navigator.userAgent;\nvar isiOS = !!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/);\nvar UploadImg =\n/*#__PURE__*/\nfunction () {\n  function UploadImg(isWeixin, $showToast, $wxAction, $diyAction) {\n    Object(D_github_mall3_0_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(this, UploadImg);\n\n    Object(D_github_mall3_0_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__[\"default\"])(this, \"$chooseImage\",\n    /*#__PURE__*/\n    function () {\n      var _ref = Object(D_github_mall3_0_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(config) {\n        var localIds, serverId, resIds;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.$wxAction.chooseImage(config);\n\n              case 2:\n                localIds = _context.sent;\n                this.$showToast('上传图片' + localIds.length + '张', 'loading');\n                _context.next = 6;\n                return this.$wxAction.upload(localIds, false);\n\n              case 6:\n                serverId = _context.sent;\n                console.log('serverId', serverId);\n\n                if (!isiOS) {\n                  _context.next = 12;\n                  break;\n                }\n\n                _context.next = 11;\n                return this.$wxAction.getLocalImgData(localIds);\n\n              case 11:\n                localIds = _context.sent;\n\n              case 12:\n                _context.prev = 12;\n                _context.next = 15;\n                return this.$diyAction(_wechat__WEBPACK_IMPORTED_MODULE_7__[\"saveWechatRes\"].url, {\n                  uids: serverId.map(function (item) {\n                    return 'wechat' + item;\n                  })\n                }, _wechat__WEBPACK_IMPORTED_MODULE_7__[\"saveWechatRes\"].method);\n\n              case 15:\n                resIds = _context.sent;\n                resIds = resIds.data;\n                _context.next = 22;\n                break;\n\n              case 19:\n                _context.prev = 19;\n                _context.t0 = _context[\"catch\"](12);\n                console.log('error', _context.t0);\n\n              case 22:\n                return _context.abrupt(\"return\", {\n                  src: localIds,\n                  serverId: serverId,\n                  guid: resIds\n                });\n\n              case 23:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[12, 19]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    this._input = this.createdInput();\n\n    if (!isWeixin) {\n      this.input = this._input;\n    }\n\n    this.chooseImageConfig = {\n      count: 1\n    };\n    this.$showToast = $showToast;\n    this.$wxAction = $wxAction;\n    this.$diyAction = $diyAction;\n    this.reusltPromise = null;\n  }\n\n  Object(D_github_mall3_0_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__[\"default\"])(UploadImg, [{\n    key: \"createdInput\",\n    value: function createdInput() {\n      var _this = this;\n\n      var input = document.createElement('input');\n      input.type = 'file';\n      input.accept = 'image/jpg,image/jpeg,image/png,image/gif';\n\n      input.onchange = function () {\n        input.files.length > 0 && _this.onNativeSelectedFile(input.files, {\n          sizeType: ['original'],\n          count: 1\n        }).then(function (data) {\n          _this.reusltPromise({\n            src: [data.src],\n            guid: [data.guid]\n          });\n        });\n      };\n\n      return input;\n    }\n  }, {\n    key: \"chooseImage\",\n    value: function chooseImage(cfg) {\n      var _this2 = this;\n\n      if (cfg) {\n        this.chooseImageConfig = Object.assign({}, {\n          count: 1\n        }, cfg);\n      }\n\n      if (this.input) {\n        return new Promise(function (resolve) {\n          _this2.input.click();\n\n          _this2.reusltPromise = resolve;\n        });\n      } else {\n        return this.$chooseImage(Object.assign({\n          count: 1\n        }, cfg));\n      }\n    }\n  }, {\n    key: \"onNativeSelectedFile\",\n    value: function onNativeSelectedFile(files, config) {\n      if (files.length) {\n        var todo;\n        var cfg = Object.assign({}, config, this.chooseImageConfig);\n\n        if (cfg.sizeType.indexOf('original') > -1) {\n          todo = _controllers_fileUpload__WEBPACK_IMPORTED_MODULE_8__[\"default\"].uploadOriginalFile;\n        } else {\n          todo = _controllers_fileUpload__WEBPACK_IMPORTED_MODULE_8__[\"default\"].uploadCompressFile;\n        }\n\n        return todo(files[0], this.onprogress.bind(this)).catch(function (error) {\n          window.alert(error.msg);\n        });\n      }\n    }\n  }, {\n    key: \"onprogress\",\n    value: function onprogress(_ref2) {\n      var loaded = _ref2.loaded,\n          total = _ref2.total;\n      console.log('onprogress');\n      var num = Math.floor(100 * loaded / total);\n\n      if (num < 100) {\n        this.$showToast('上传图片：' + num + '%');\n      } else {\n        this.$showToast('上传图片...', 'msg', 0);\n      }\n    }\n  }]);\n\n  return UploadImg;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29udHJvbGxlcnMvVXBsb2FkSW1nLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL1VwbG9hZEltZy5qcz9lYzg1Il0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlICovXHJcbmltcG9ydCB7IHNhdmVXZWNoYXRSZXMgfSBmcm9tICcuL3dlY2hhdCdcclxuaW1wb3J0IGZpbGVVcGxvYWQgZnJvbSAnQC9jb250cm9sbGVycy9maWxlVXBsb2FkJ1xyXG52YXIgdSA9IG5hdmlnYXRvci51c2VyQWdlbnRcclxudmFyIGlzaU9TID0gISF1Lm1hdGNoKC9cXChpW147XSs7KCBVOyk/IENQVS4rTWFjIE9TIFgvKVxyXG5leHBvcnQgY2xhc3MgVXBsb2FkSW1nIHtcclxuICAgIGNvbnN0cnVjdG9yKGlzV2VpeGluLCAkc2hvd1RvYXN0LCAkd3hBY3Rpb24sICRkaXlBY3Rpb24pIHtcclxuICAgICAgICB0aGlzLl9pbnB1dCA9IHRoaXMuY3JlYXRlZElucHV0KClcclxuICAgICAgICBpZiAoIWlzV2VpeGluKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5wdXQgPSB0aGlzLl9pbnB1dFxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNob29zZUltYWdlQ29uZmlnID0geyBjb3VudDogMSB9XHJcbiAgICAgICAgdGhpcy4kc2hvd1RvYXN0ID0gJHNob3dUb2FzdFxyXG4gICAgICAgIHRoaXMuJHd4QWN0aW9uID0gJHd4QWN0aW9uXHJcbiAgICAgICAgdGhpcy4kZGl5QWN0aW9uID0gJGRpeUFjdGlvblxyXG4gICAgICAgIHRoaXMucmV1c2x0UHJvbWlzZSA9IG51bGxcclxuICAgIH1cclxuICAgIGNyZWF0ZWRJbnB1dCgpIHtcclxuICAgICAgICBsZXQgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpXHJcbiAgICAgICAgaW5wdXQudHlwZSA9ICdmaWxlJ1xyXG4gICAgICAgIGlucHV0LmFjY2VwdCA9ICdpbWFnZS9qcGcsaW1hZ2UvanBlZyxpbWFnZS9wbmcsaW1hZ2UvZ2lmJ1xyXG4gICAgICAgIGlucHV0Lm9uY2hhbmdlID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dC5maWxlcy5sZW5ndGggPiAwICYmIHRoaXMub25OYXRpdmVTZWxlY3RlZEZpbGUoaW5wdXQuZmlsZXMsIHtcclxuICAgICAgICAgICAgICAgIHNpemVUeXBlOiBbJ29yaWdpbmFsJ10sXHJcbiAgICAgICAgICAgICAgICBjb3VudDogMVxyXG4gICAgICAgICAgICB9KS50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXVzbHRQcm9taXNlKHtcclxuICAgICAgICAgICAgICAgICAgICBzcmM6IFtkYXRhLnNyY10sXHJcbiAgICAgICAgICAgICAgICAgICAgZ3VpZDogW2RhdGEuZ3VpZF1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnB1dFxyXG4gICAgfVxyXG4gICAgJGNob29zZUltYWdlID0gYXN5bmMgZnVuY3Rpb24gKGNvbmZpZykge1xyXG4gICAgICAgIGxldCBsb2NhbElkcyA9IGF3YWl0IHRoaXMuJHd4QWN0aW9uLmNob29zZUltYWdlKGNvbmZpZylcclxuICAgICAgICB0aGlzLiRzaG93VG9hc3QoJ+S4iuS8oOWbvueJhycgKyBsb2NhbElkcy5sZW5ndGggKyAn5bygJywgJ2xvYWRpbmcnKVxyXG4gICAgICAgIGxldCBzZXJ2ZXJJZCA9IGF3YWl0IHRoaXMuJHd4QWN0aW9uLnVwbG9hZChsb2NhbElkcywgZmFsc2UpXHJcbiAgICAgICAgY29uc29sZS5sb2coJ3NlcnZlcklkJywgc2VydmVySWQpXHJcbiAgICAgICAgaWYgKGlzaU9TKSB7XHJcbiAgICAgICAgICAgIGxvY2FsSWRzID0gYXdhaXQgdGhpcy4kd3hBY3Rpb24uZ2V0TG9jYWxJbWdEYXRhKGxvY2FsSWRzKVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcmVzSWRzXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmVzSWRzID0gYXdhaXQgdGhpcy4kZGl5QWN0aW9uKHNhdmVXZWNoYXRSZXMudXJsLCB7XHJcbiAgICAgICAgICAgICAgICB1aWRzOiBzZXJ2ZXJJZC5tYXAoaXRlbSA9PiAnd2VjaGF0JyArIGl0ZW0pXHJcbiAgICAgICAgICAgIH0sIHNhdmVXZWNoYXRSZXMubWV0aG9kKVxyXG4gICAgICAgICAgICByZXNJZHMgPSByZXNJZHMuZGF0YVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicsIGVycm9yKVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzcmM6IGxvY2FsSWRzLFxyXG4gICAgICAgICAgICBzZXJ2ZXJJZCxcclxuICAgICAgICAgICAgZ3VpZDogcmVzSWRzXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2hvb3NlSW1hZ2UoY2ZnKSB7XHJcbiAgICAgICAgaWYgKGNmZykge1xyXG4gICAgICAgICAgICB0aGlzLmNob29zZUltYWdlQ29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgeyBjb3VudDogMSB9LCBjZmcpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmlucHV0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQuY2xpY2soKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXVzbHRQcm9taXNlID0gcmVzb2x2ZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLiRjaG9vc2VJbWFnZShPYmplY3QuYXNzaWduKHsgY291bnQ6IDEgfSwgY2ZnKSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvbk5hdGl2ZVNlbGVjdGVkRmlsZShmaWxlcywgY29uZmlnKSB7XHJcbiAgICAgICAgaWYgKGZpbGVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB2YXIgdG9kb1xyXG4gICAgICAgICAgICBsZXQgY2ZnID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnLCB0aGlzLmNob29zZUltYWdlQ29uZmlnKVxyXG4gICAgICAgICAgICBpZiAoY2ZnLnNpemVUeXBlLmluZGV4T2YoJ29yaWdpbmFsJykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgdG9kbyA9IGZpbGVVcGxvYWQudXBsb2FkT3JpZ2luYWxGaWxlXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0b2RvID0gZmlsZVVwbG9hZC51cGxvYWRDb21wcmVzc0ZpbGVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdG9kbyhmaWxlc1swXSwgdGhpcy5vbnByb2dyZXNzLmJpbmQodGhpcykpLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5hbGVydChlcnJvci5tc2cpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25wcm9ncmVzcyh7IGxvYWRlZCwgdG90YWwgfSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdvbnByb2dyZXNzJylcclxuICAgICAgICBsZXQgbnVtID0gTWF0aC5mbG9vcigxMDAgKiBsb2FkZWQgLyB0b3RhbClcclxuICAgICAgICBpZiAobnVtIDwgMTAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuJHNob3dUb2FzdCgn5LiK5Lyg5Zu+54mH77yaJyArIG51bSArICclJylcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLiRzaG93VG9hc3QoJ+S4iuS8oOWbvueJhy4uLicsICdtc2cnLCAwKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBNEJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQ0E7QUFGQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUxBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQ0E7QUFEQTtBQU1BO0FBQ0E7QUFQQTtBQUFBO0FBQUE7QUFBQTtBQVdBO0FBQUE7QUFBQTtBQURBO0FBQ0E7QUFYQTtBQVVBO0FBR0E7QUFiQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFlQTtBQUNBO0FBaEJBO0FBQUE7QUFrQkE7QUFDQTtBQUNBO0FBSEE7QUFDQTtBQWxCQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBN0JBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFaQTtBQUFBO0FBQUE7QUFZQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBNUJBO0FBQUE7QUFBQTtBQW9EQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBaEVBO0FBQUE7QUFBQTtBQWtFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUE5RUE7QUFBQTtBQUFBO0FBK0VBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF2RkE7QUFDQTtBQURBO0FBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/controllers/UploadImg.js\n");

/***/ }),

/***/ "./src/controllers/fileUpload.js":
/*!***************************************!*\
  !*** ./src/controllers/fileUpload.js ***!
  \***************************************/
/*! exports provided: uploadQiniu, getEXIF, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"uploadQiniu\", function() { return uploadQiniu; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getEXIF\", function() { return getEXIF; });\n/* harmony import */ var core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es6.object.keys */ \"./node_modules/core-js/modules/es6.object.keys.js\");\n/* harmony import */ var core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_object_keys__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es6.object.assign */ \"./node_modules/core-js/modules/es6.object.assign.js\");\n/* harmony import */ var core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es6.function.name */ \"./node_modules/core-js/modules/es6.function.name.js\");\n/* harmony import */ var core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_github_mall3_0_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/slicedToArray */ \"./node_modules/@babel/runtime/helpers/esm/slicedToArray.js\");\n/* harmony import */ var core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es6.string.iterator */ \"./node_modules/core-js/modules/es6.string.iterator.js\");\n/* harmony import */ var core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es6_string_iterator__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/web.dom.iterable */ \"./node_modules/core-js/modules/web.dom.iterable.js\");\n/* harmony import */ var core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var exif_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! exif-js */ \"./node_modules/exif-js/exif.js\");\n/* harmony import */ var exif_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(exif_js__WEBPACK_IMPORTED_MODULE_6__);\n\n\n\n\n\n\n\n/* eslint-disable */\n\n/**\r\n * 最大上传图片的大小\r\n */\n\nvar MAX = 12;\nvar MAXFILESIZETITP = \"\\u6682\\u4E0D\\u652F\\u6301\\u5927\\u4E8E\".concat(MAX, \"m\\u7684\\u56FE\\u7247\\u4E0A\\u4F20\");\nvar MAXFILESIZE = MAX * 1024 * 1024;\nvar DV_ORIG_COMP = 600 * 1024; // 原图与压缩的临界值 600k\n\n/** 上传文件\r\n * @param  {String} url 上传路径\r\n * @param  {FormData} formData  上传的formData对象\r\n * @param  {Function} onprogress 不断触发上传进度的函数\r\n * @return  {String} responseText\r\n */\n\nvar uploadFileXhr = function uploadFileXhr(url, formData) {\n  var onprogress = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : function () {};\n  return new Promise(function (resolve, reject) {\n    var xhr = new window.XMLHttpRequest();\n    xhr.upload.addEventListener('progress', onprogress, false);\n    xhr.addEventListener('load', function () {\n      console.log('load');\n    }, false);\n    xhr.addEventListener('error', function () {\n      console.log('error');\n    }, false);\n    xhr.addEventListener('abort', function () {\n      console.log('abort');\n    }, false);\n\n    xhr.onreadystatechange = function () {\n      if (this.readyState === 4) {\n        if (this.status === 200) {\n          try {\n            var response = JSON.parse(this.responseText);\n\n            if (response.status === 200) {\n              resolve(response.data);\n            } else if (response.status === undefined) {\n              resolve(response);\n            } else {\n              var error = {\n                msg: response.message\n              };\n              reject(error);\n            }\n          } catch (e) {\n            resolve({\n              msg: this.responseText\n            });\n          }\n        } else {\n          reject(this.responseText);\n        }\n      }\n    };\n\n    xhr.open('POST', url);\n    xhr.send(formData);\n  });\n};\n\nvar uploadFileExif = function uploadFileExif(guid, exifObj) {\n  var url = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '/resource/home/save_res_exif';\n  var formData = new window.FormData();\n  formData.append('guid', guid);\n  formData.append('lat', exifObj['GPSLatitude']);\n  formData.append('lng', exifObj['GPSLongitude']);\n  formData.append('time', exifObj['DateTimeOriginal']);\n  formData.append('exif', JSON.stringify(exifObj));\n  return uploadFileXhr(url, formData);\n};\n\nvar checkImgComplete = function checkImgComplete(img) {\n  return new Promise(function (resolve, reject) {\n    if (img.naturalWidth > 0 || img.naturalHeight > 0 || img.complete) {\n      resolve();\n    } else {\n      img.addEventListener('load', function () {\n        return resolve();\n      });\n    }\n  });\n};\n/**\r\n *\r\n * @param {*} url 上传地址\r\n * @param {*} param1  要上传的图片以及上传进度的回调\r\n */\n\n\nfunction uploadFile() {\n  var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '/resource/home/upload';\n\n  var _ref = arguments.length > 1 ? arguments[1] : undefined,\n      files = _ref.files,\n      onprogress = _ref.onprogress;\n\n  var formData = new window.FormData();\n  files.forEach(function (file) {\n    return formData.append('file_base[]', file);\n  });\n  return uploadFileXhr(url, formData, onprogress);\n}\n\nfunction uploadBase64() {\n  var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '/resource/home/upload_base64';\n\n  var _ref2 = arguments.length > 1 ? arguments[1] : undefined,\n      base64 = _ref2.base64,\n      fileName = _ref2.fileName,\n      fileType = _ref2.fileType,\n      onprogress = _ref2.onprogress;\n\n  var formData = new window.FormData();\n  formData.append('base64', base64);\n  formData.append('fileName', fileName);\n  formData.append('fileType', fileType);\n  return uploadFileXhr(url, formData, onprogress);\n}\n/**\r\n* 上传单张原图 只做了大小判断\r\n* @param {*} file 原图\r\n* @param {*} onprogress 上传进度回调\r\n*/\n\n\nfunction uploadOriginalFile(file, onprogress) {\n  if (file.size > MAXFILESIZE) {\n    var err = {\n      'msg': MAXFILESIZETITP\n    };\n    return Promise.reject(err);\n  }\n\n  return Promise.all([asyReadFile2Img(file), uploadFile(undefined, {\n    files: [file],\n    onprogress: onprogress\n  })]).then(function (_ref3) {\n    var _ref4 = Object(D_github_mall3_0_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(_ref3, 2),\n        img = _ref4[0],\n        guids = _ref4[1];\n\n    return {\n      guid: guids[0],\n      src: img.src\n    };\n  });\n}\n/**\r\n * 上传压缩图片\r\n * @param {*} file\r\n * @param {*} onprogress\r\n */\n\n\nfunction uploadCompressFile(file, onprogress) {\n  return Promise.all([asyReadFile2Img(file), asyReadFileEXIF(file, {}, null, true)]).then(function (_ref5) {\n    var _ref6 = Object(D_github_mall3_0_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(_ref5, 2),\n        img = _ref6[0],\n        mFileInfo = _ref6[1];\n\n    return compress({\n      img: img,\n      mimeType: file.type,\n      maxWidth: file.size > DV_ORIG_COMP ? undefined : img.width,\n      rotateDeg: mFileInfo.rotateDeg,\n      orientation: mFileInfo.orientation\n    }).then(function (base64) {\n      return uploadBase64(undefined, {\n        base64: base64,\n        fileName: file.name,\n        fileType: file.type,\n        onprogress: onprogress\n      }).then(function (result) {\n        return {\n          guid: result[0],\n          src: base64\n        };\n      });\n    });\n  });\n}\n/**\r\n * 压缩上传图片 并且 要带有exif信息\r\n * @param {*} file\r\n * @param {*} onprogress\r\n */\n\n\nfunction uploadCompressFileWidthExif(file, onprogress) {\n  return Promise.all([asyReadFile2Img(file), asyReadFileEXIF(file, {}, null, true)]).then(function (_ref7) {\n    var _ref8 = Object(D_github_mall3_0_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(_ref7, 2),\n        img = _ref8[0],\n        mFileInfo = _ref8[1];\n\n    if (!mFileInfo.Model || !mFileInfo.GPSLatitude || !mFileInfo.GPSLongitude) {\n      var err = {\n        'msg': '该图片缺乏地理定位信息，请上传原图！'\n      };\n      return Promise.reject(err);\n    }\n\n    return compress({\n      img: img,\n      maxWidth: file.size > DV_ORIG_COMP ? undefined : img.width,\n      mimeType: file.type,\n      rotateDeg: mFileInfo.rotateDeg,\n      orientation: mFileInfo.orientation\n    }).then(function (base64) {\n      return uploadBase64(undefined, {\n        base64: base64,\n        fileName: file.name,\n        fileType: file.type,\n        onprogress: onprogress\n      }).then(function (result) {\n        return uploadFileExif(result[0], mFileInfo).then(function () {\n          return {\n            src: base64,\n            guid: result[0]\n          };\n        });\n      });\n    });\n  });\n}\n\nfunction compress(_ref9) {\n  var img = _ref9.img,\n      _ref9$maxWidth = _ref9.maxWidth,\n      maxWidth = _ref9$maxWidth === void 0 ? 1500 : _ref9$maxWidth,\n      _ref9$mimeType = _ref9.mimeType,\n      mimeType = _ref9$mimeType === void 0 ? 'image/jpeg' : _ref9$mimeType,\n      _ref9$rotateDeg = _ref9.rotateDeg,\n      rotateDeg = _ref9$rotateDeg === void 0 ? 0 : _ref9$rotateDeg,\n      _ref9$orientation = _ref9.orientation,\n      orientation = _ref9$orientation === void 0 ? 0 : _ref9$orientation;\n  // console.log('mimeType:', mimeType)\n  return new Promise(function (resolve, reject) {\n    var cvs = document.createElement('canvas');\n    checkImgComplete(img).then(function () {\n      var width = img.naturalWidth;\n      var height = img.naturalHeight;\n      var imgRatio = width / height;\n      console.info('compress:width', width, maxWidth);\n      console.info('compress:height', height);\n      console.info('img', img.complete);\n\n      if (width > maxWidth) {\n        width = maxWidth;\n        height = width / imgRatio;\n      }\n\n      cvs.width = width;\n      cvs.height = height;\n      var ctx = cvs.getContext('2d');\n\n      if (orientation === 6) {\n        cvs.height = width;\n        cvs.width = height;\n        ctx.translate(height, 0);\n        ctx.rotate(90 * Math.PI / 180);\n      } else if (orientation === 8) {\n        cvs.height = width;\n        cvs.width = height;\n        ctx.translate(0, width);\n        ctx.rotate(-90 * Math.PI / 180);\n      } else if (orientation === 3) {\n        ctx.translate(width, height);\n        ctx.rotate(180 * Math.PI / 180);\n      } // ctx.drawImage(img, 0, 0, img.naturalWidth, img.naturalHeight)\n\n\n      ctx.drawImage(img, 0, 0, img.naturalWidth, img.naturalHeight, 0, 0, width, height);\n      var quality = width >= 1500 ? 0.5 : width > 600 ? 0.6 : 1;\n      var newImageData = cvs.toDataURL(mimeType, quality);\n      resolve(newImageData || img.src);\n    });\n  });\n}\n/** 获取照片的EXIF信息，主要拿来判断照片是否旋转了\r\n * @param  {FILE} file 文件\r\n * @param  {Object} info={} 文件信息\r\n * @param  {Array} keys=[] 另外需要返回的EXIF字段\r\n * @param  {Boolean} needAll=false 是否要返回全部的EXIT的字段\r\n */\n\n\nfunction asyReadFileEXIF(file) {\n  var info = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var keys = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  var needAll = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  return new Promise(function (resolve, reject) {\n    exif_js__WEBPACK_IMPORTED_MODULE_6___default.a.getData(file, function () {\n      var _this = this;\n\n      var orientation = this.exifdata.Orientation;\n      console.log('EXIF', this.exifdata);\n      var rotateDeg = 0;\n\n      if (orientation !== undefined && orientation !== 1) {\n        switch (orientation) {\n          case 6:\n            // 顺时针90°\n            rotateDeg = 90 * Math.PI / 180;\n            break;\n\n          case 8:\n            // 逆时针90°\n            rotateDeg = -90 * Math.PI / 180;\n            break;\n\n          case 3:\n            // 180°\n            rotateDeg = 180 * Math.PI / 180;\n            break;\n\n          default:\n            rotateDeg = 0;\n        }\n      }\n\n      console.info('orientation', orientation);\n\n      if (needAll === true) {\n        Object.assign(info, this.exifdata);\n      } else {\n        if (keys.length > 0) keys.forEach(function (key) {\n          info[key] = _this.exifdata[key];\n        });\n      }\n\n      info.rotateDeg = rotateDeg;\n      info.orientation = orientation;\n      resolve(info);\n    });\n  });\n}\n/**\r\n * 把选择的文件(file)变成图片(img) 好获得它的宽度，高度\r\n * @param {*} file\r\n */\n\n\nfunction asyReadFile2Img(file) {\n  return new Promise(function (resolve, reject) {\n    var reader = new FileReader(file);\n    var img = document.createElement('img');\n\n    reader.onload = function (e) {\n      img.src = e.target.result;\n      resolve(img);\n    };\n\n    reader.readAsDataURL(file);\n  });\n}\n\nfunction createFileInput() {\n  var accept = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'image/jpg,image/jpeg,image/png,image/gif';\n  var input = document.createElement('input');\n  input.type = 'file';\n  input.accept = accept;\n  return input;\n}\n\nfunction uploadQiniu() {\n  var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'http://upload.qiniu.com/';\n\n  var _ref10 = arguments.length > 1 ? arguments[1] : undefined,\n      params = _ref10.params,\n      onprogress = _ref10.onprogress;\n\n  var formData = new window.FormData();\n  var keys = Object.keys(params);\n  keys.forEach(function (key) {\n    formData.append(key, params[key]);\n  });\n  return uploadFileXhr(url, formData, onprogress);\n}\nvar getEXIF = exif_js__WEBPACK_IMPORTED_MODULE_6___default.a;\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  DV_ORIG_COMP: DV_ORIG_COMP,\n  MAXFILESIZE: MAXFILESIZE,\n  MAXFILESIZETITP: MAXFILESIZETITP,\n  uploadBase64: uploadBase64,\n  uploadFile: uploadFile,\n  uploadOriginalFile: uploadOriginalFile,\n  uploadCompressFile: uploadCompressFile,\n  uploadCompressFileWidthExif: uploadCompressFileWidthExif,\n\n  /** 读取文件 返回base64信息\r\n   * @param  {FILE} file\r\n   * @param  {} info={base64,size}\r\n   * @return Promise\r\n   */\n  readImageFile: function readImageFile(file) {\n    var info = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return new Promise(function (resolve, reject) {\n      var reader = new window.FileReader();\n      reader.readAsDataURL(file);\n\n      reader.onloadend = function (event) {\n        info.base64 = event.target.result;\n        info.size = file.size;\n        resolve(info);\n      };\n    });\n  },\n  compress: compress,\n  asyReadFileEXIF: asyReadFileEXIF,\n  asyReadFile2Img: asyReadFile2Img,\n  createFileInput: createFileInput\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29udHJvbGxlcnMvZmlsZVVwbG9hZC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVycy9maWxlVXBsb2FkLmpzP2U1YTIiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgKi9cclxuaW1wb3J0IEVYSUYgZnJvbSAnZXhpZi1qcydcclxuXHJcbi8qKlxyXG4gKiDmnIDlpKfkuIrkvKDlm77niYfnmoTlpKflsI9cclxuICovXHJcbmNvbnN0IE1BWCA9IDEyXHJcbmNvbnN0IE1BWEZJTEVTSVpFVElUUCA9IGDmmoLkuI3mlK/mjIHlpKfkuo4ke01BWH1t55qE5Zu+54mH5LiK5LygYFxyXG5jb25zdCBNQVhGSUxFU0laRSA9IE1BWCAqIDEwMjQgKiAxMDI0XHJcblxyXG5jb25zdCBEVl9PUklHX0NPTVAgPSA2MDAgKiAxMDI0IC8vIOWOn+WbvuS4juWOi+e8qeeahOS4tOeVjOWAvCA2MDBrXHJcblxyXG4vKiog5LiK5Lyg5paH5Lu2XHJcbiAqIEBwYXJhbSAge1N0cmluZ30gdXJsIOS4iuS8oOi3r+W+hFxyXG4gKiBAcGFyYW0gIHtGb3JtRGF0YX0gZm9ybURhdGEgIOS4iuS8oOeahGZvcm1EYXRh5a+56LGhXHJcbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBvbnByb2dyZXNzIOS4jeaWreinpuWPkeS4iuS8oOi/m+W6pueahOWHveaVsFxyXG4gKiBAcmV0dXJuICB7U3RyaW5nfSByZXNwb25zZVRleHRcclxuICovXHJcbmNvbnN0IHVwbG9hZEZpbGVYaHIgPSAodXJsLCBmb3JtRGF0YSwgb25wcm9ncmVzcyA9IGZ1bmN0aW9uICgpIHsgfSkgPT4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgbGV0IHhociA9IG5ldyB3aW5kb3cuWE1MSHR0cFJlcXVlc3QoKVxyXG4gICAgeGhyLnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCdwcm9ncmVzcycsIG9ucHJvZ3Jlc3MsIGZhbHNlKVxyXG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoKSB7IGNvbnNvbGUubG9nKCdsb2FkJykgfSwgZmFsc2UpXHJcbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbiAoKSB7IGNvbnNvbGUubG9nKCdlcnJvcicpIH0sIGZhbHNlKVxyXG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZnVuY3Rpb24gKCkgeyBjb25zb2xlLmxvZygnYWJvcnQnKSB9LCBmYWxzZSlcclxuICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gNCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHRoaXMucmVzcG9uc2VUZXh0KVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlLmRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlcnJvciA9IHsgbXNnOiByZXNwb25zZS5tZXNzYWdlIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgbXNnOiB0aGlzLnJlc3BvbnNlVGV4dCB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KHRoaXMucmVzcG9uc2VUZXh0KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgeGhyLm9wZW4oJ1BPU1QnLCB1cmwpXHJcbiAgICB4aHIuc2VuZChmb3JtRGF0YSlcclxufSlcclxuXHJcbmNvbnN0IHVwbG9hZEZpbGVFeGlmID0gZnVuY3Rpb24gKGd1aWQsIGV4aWZPYmosIHVybCA9ICcvcmVzb3VyY2UvaG9tZS9zYXZlX3Jlc19leGlmJykge1xyXG4gICAgbGV0IGZvcm1EYXRhID0gbmV3IHdpbmRvdy5Gb3JtRGF0YSgpXHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoJ2d1aWQnLCBndWlkKVxyXG4gICAgZm9ybURhdGEuYXBwZW5kKCdsYXQnLCBleGlmT2JqWydHUFNMYXRpdHVkZSddKVxyXG4gICAgZm9ybURhdGEuYXBwZW5kKCdsbmcnLCBleGlmT2JqWydHUFNMb25naXR1ZGUnXSlcclxuICAgIGZvcm1EYXRhLmFwcGVuZCgndGltZScsIGV4aWZPYmpbJ0RhdGVUaW1lT3JpZ2luYWwnXSlcclxuICAgIGZvcm1EYXRhLmFwcGVuZCgnZXhpZicsIEpTT04uc3RyaW5naWZ5KGV4aWZPYmopKVxyXG4gICAgcmV0dXJuIHVwbG9hZEZpbGVYaHIodXJsLCBmb3JtRGF0YSlcclxufVxyXG5cclxuY29uc3QgY2hlY2tJbWdDb21wbGV0ZSA9IChpbWcpID0+IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgIGlmIChpbWcubmF0dXJhbFdpZHRoID4gMCB8fCBpbWcubmF0dXJhbEhlaWdodCA+IDAgfHwgaW1nLmNvbXBsZXRlKSB7XHJcbiAgICAgICAgcmVzb2x2ZSgpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGltZy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4gcmVzb2x2ZSgpKVxyXG4gICAgfVxyXG59KVxyXG5cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSB7Kn0gdXJsIOS4iuS8oOWcsOWdgFxyXG4gKiBAcGFyYW0geyp9IHBhcmFtMSAg6KaB5LiK5Lyg55qE5Zu+54mH5Lul5Y+K5LiK5Lyg6L+b5bqm55qE5Zue6LCDXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGxvYWRGaWxlKHVybCA9ICcvcmVzb3VyY2UvaG9tZS91cGxvYWQnLCB7IGZpbGVzLCBvbnByb2dyZXNzIH0pIHtcclxuICAgIGxldCBmb3JtRGF0YSA9IG5ldyB3aW5kb3cuRm9ybURhdGEoKVxyXG4gICAgZmlsZXMuZm9yRWFjaChmaWxlID0+IGZvcm1EYXRhLmFwcGVuZCgnZmlsZV9iYXNlW10nLCBmaWxlKSlcclxuICAgIHJldHVybiB1cGxvYWRGaWxlWGhyKHVybCwgZm9ybURhdGEsIG9ucHJvZ3Jlc3MpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwbG9hZEJhc2U2NCh1cmwgPSAnL3Jlc291cmNlL2hvbWUvdXBsb2FkX2Jhc2U2NCcsIHsgYmFzZTY0LCBmaWxlTmFtZSwgZmlsZVR5cGUsIG9ucHJvZ3Jlc3MgfSkge1xyXG4gICAgbGV0IGZvcm1EYXRhID0gbmV3IHdpbmRvdy5Gb3JtRGF0YSgpXHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoJ2Jhc2U2NCcsIGJhc2U2NClcclxuICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZU5hbWUnLCBmaWxlTmFtZSlcclxuICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZVR5cGUnLCBmaWxlVHlwZSlcclxuICAgIHJldHVybiB1cGxvYWRGaWxlWGhyKHVybCwgZm9ybURhdGEsIG9ucHJvZ3Jlc3MpXHJcbn1cclxuXHJcbi8qKlxyXG4qIOS4iuS8oOWNleW8oOWOn+WbviDlj6rlgZrkuoblpKflsI/liKTmlq1cclxuKiBAcGFyYW0geyp9IGZpbGUg5Y6f5Zu+XHJcbiogQHBhcmFtIHsqfSBvbnByb2dyZXNzIOS4iuS8oOi/m+W6puWbnuiwg1xyXG4qL1xyXG5mdW5jdGlvbiB1cGxvYWRPcmlnaW5hbEZpbGUoZmlsZSwgb25wcm9ncmVzcykge1xyXG4gICAgaWYgKGZpbGUuc2l6ZSA+IE1BWEZJTEVTSVpFKSB7XHJcbiAgICAgICAgbGV0IGVyciA9IHsgJ21zZyc6IE1BWEZJTEVTSVpFVElUUCB9XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycilcclxuICAgIH1cclxuICAgIHJldHVybiBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgYXN5UmVhZEZpbGUySW1nKGZpbGUpLFxyXG4gICAgICAgIHVwbG9hZEZpbGUodW5kZWZpbmVkLCB7IGZpbGVzOiBbZmlsZV0sIG9ucHJvZ3Jlc3M6IG9ucHJvZ3Jlc3MgfSldKVxyXG4gICAgICAgIC50aGVuKChbaW1nLCBndWlkc10pID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGd1aWQ6IGd1aWRzWzBdLFxyXG4gICAgICAgICAgICAgICAgc3JjOiBpbWcuc3JjXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG59XHJcbi8qKlxyXG4gKiDkuIrkvKDljovnvKnlm77niYdcclxuICogQHBhcmFtIHsqfSBmaWxlXHJcbiAqIEBwYXJhbSB7Kn0gb25wcm9ncmVzc1xyXG4gKi9cclxuZnVuY3Rpb24gdXBsb2FkQ29tcHJlc3NGaWxlKGZpbGUsIG9ucHJvZ3Jlc3MpIHtcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChbYXN5UmVhZEZpbGUySW1nKGZpbGUpLCBhc3lSZWFkRmlsZUVYSUYoZmlsZSwge30sIG51bGwsIHRydWUpXSlcclxuICAgICAgICAudGhlbigoW2ltZywgbUZpbGVJbmZvXSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gY29tcHJlc3Moe1xyXG4gICAgICAgICAgICAgICAgaW1nOiBpbWcsXHJcbiAgICAgICAgICAgICAgICBtaW1lVHlwZTogZmlsZS50eXBlLFxyXG4gICAgICAgICAgICAgICAgbWF4V2lkdGg6IGZpbGUuc2l6ZSA+IERWX09SSUdfQ09NUCA/IHVuZGVmaW5lZCA6IGltZy53aWR0aCxcclxuICAgICAgICAgICAgICAgIHJvdGF0ZURlZzogbUZpbGVJbmZvLnJvdGF0ZURlZyxcclxuICAgICAgICAgICAgICAgIG9yaWVudGF0aW9uOiBtRmlsZUluZm8ub3JpZW50YXRpb25cclxuICAgICAgICAgICAgfSkudGhlbihiYXNlNjQgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwbG9hZEJhc2U2NCh1bmRlZmluZWQsIHtcclxuICAgICAgICAgICAgICAgICAgICBiYXNlNjQ6IGJhc2U2NCwgZmlsZU5hbWU6IGZpbGUubmFtZSwgZmlsZVR5cGU6IGZpbGUudHlwZSwgb25wcm9ncmVzczogb25wcm9ncmVzc1xyXG4gICAgICAgICAgICAgICAgfSkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGd1aWQ6IHJlc3VsdFswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiBiYXNlNjRcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbn1cclxuLyoqXHJcbiAqIOWOi+e8qeS4iuS8oOWbvueJhyDlubbkuJQg6KaB5bim5pyJZXhpZuS/oeaBr1xyXG4gKiBAcGFyYW0geyp9IGZpbGVcclxuICogQHBhcmFtIHsqfSBvbnByb2dyZXNzXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGxvYWRDb21wcmVzc0ZpbGVXaWR0aEV4aWYoZmlsZSwgb25wcm9ncmVzcykge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFthc3lSZWFkRmlsZTJJbWcoZmlsZSksIGFzeVJlYWRGaWxlRVhJRihmaWxlLCB7fSwgbnVsbCwgdHJ1ZSldKS50aGVuKChbaW1nLCBtRmlsZUluZm9dKSA9PiB7XHJcbiAgICAgICAgaWYgKCFtRmlsZUluZm8uTW9kZWwgfHwgIW1GaWxlSW5mby5HUFNMYXRpdHVkZSB8fCAhbUZpbGVJbmZvLkdQU0xvbmdpdHVkZSkge1xyXG4gICAgICAgICAgICBsZXQgZXJyID0geyAnbXNnJzogJ+ivpeWbvueJh+e8uuS5j+WcsOeQhuWumuS9jeS/oeaBr++8jOivt+S4iuS8oOWOn+Wbvu+8gScgfVxyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29tcHJlc3Moe1xyXG4gICAgICAgICAgICBpbWc6IGltZyxcclxuICAgICAgICAgICAgbWF4V2lkdGg6IGZpbGUuc2l6ZSA+IERWX09SSUdfQ09NUCA/IHVuZGVmaW5lZCA6IGltZy53aWR0aCxcclxuICAgICAgICAgICAgbWltZVR5cGU6IGZpbGUudHlwZSxcclxuICAgICAgICAgICAgcm90YXRlRGVnOiBtRmlsZUluZm8ucm90YXRlRGVnLFxyXG4gICAgICAgICAgICBvcmllbnRhdGlvbjogbUZpbGVJbmZvLm9yaWVudGF0aW9uXHJcbiAgICAgICAgfSkudGhlbihiYXNlNjQgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdXBsb2FkQmFzZTY0KHVuZGVmaW5lZCwge1xyXG4gICAgICAgICAgICAgICAgYmFzZTY0OiBiYXNlNjQsIGZpbGVOYW1lOiBmaWxlLm5hbWUsIGZpbGVUeXBlOiBmaWxlLnR5cGUsIG9ucHJvZ3Jlc3M6IG9ucHJvZ3Jlc3NcclxuICAgICAgICAgICAgfSkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwbG9hZEZpbGVFeGlmKHJlc3VsdFswXSwgbUZpbGVJbmZvKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmM6IGJhc2U2NCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZ3VpZDogcmVzdWx0WzBdXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gY29tcHJlc3MoeyBpbWcsIG1heFdpZHRoID0gMTUwMCwgbWltZVR5cGUgPSAnaW1hZ2UvanBlZycsIHJvdGF0ZURlZyA9IDAsIG9yaWVudGF0aW9uID0gMCB9KSB7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnbWltZVR5cGU6JywgbWltZVR5cGUpXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGxldCBjdnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKVxyXG4gICAgICAgIGNoZWNrSW1nQ29tcGxldGUoaW1nKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgbGV0IHdpZHRoID0gaW1nLm5hdHVyYWxXaWR0aFxyXG4gICAgICAgICAgICBsZXQgaGVpZ2h0ID0gaW1nLm5hdHVyYWxIZWlnaHRcclxuICAgICAgICAgICAgbGV0IGltZ1JhdGlvID0gd2lkdGggLyBoZWlnaHRcclxuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdjb21wcmVzczp3aWR0aCcsIHdpZHRoLCBtYXhXaWR0aClcclxuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdjb21wcmVzczpoZWlnaHQnLCBoZWlnaHQpXHJcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnaW1nJywgaW1nLmNvbXBsZXRlKVxyXG4gICAgICAgICAgICBpZiAod2lkdGggPiBtYXhXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgd2lkdGggPSBtYXhXaWR0aFxyXG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gd2lkdGggLyBpbWdSYXRpb1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGN2cy53aWR0aCA9IHdpZHRoXHJcbiAgICAgICAgICAgIGN2cy5oZWlnaHQgPSBoZWlnaHRcclxuICAgICAgICAgICAgbGV0IGN0eCA9IGN2cy5nZXRDb250ZXh0KCcyZCcpXHJcbiAgICAgICAgICAgIGlmIChvcmllbnRhdGlvbiA9PT0gNikge1xyXG4gICAgICAgICAgICAgICAgY3ZzLmhlaWdodCA9IHdpZHRoXHJcbiAgICAgICAgICAgICAgICBjdnMud2lkdGggPSBoZWlnaHRcclxuICAgICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoaGVpZ2h0LCAwKVxyXG4gICAgICAgICAgICAgICAgY3R4LnJvdGF0ZSg5MCAqIE1hdGguUEkgLyAxODApXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3JpZW50YXRpb24gPT09IDgpIHtcclxuICAgICAgICAgICAgICAgIGN2cy5oZWlnaHQgPSB3aWR0aFxyXG4gICAgICAgICAgICAgICAgY3ZzLndpZHRoID0gaGVpZ2h0XHJcbiAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKDAsIHdpZHRoKVxyXG4gICAgICAgICAgICAgICAgY3R4LnJvdGF0ZSgtOTAgKiBNYXRoLlBJIC8gMTgwKVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9yaWVudGF0aW9uID09PSAzKSB7XHJcbiAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKHdpZHRoLCBoZWlnaHQpXHJcbiAgICAgICAgICAgICAgICBjdHgucm90YXRlKDE4MCAqIE1hdGguUEkgLyAxODApXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIGltZy5uYXR1cmFsV2lkdGgsIGltZy5uYXR1cmFsSGVpZ2h0KVxyXG4gICAgICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCwgaW1nLm5hdHVyYWxXaWR0aCwgaW1nLm5hdHVyYWxIZWlnaHQsIDAsIDAsIHdpZHRoLCBoZWlnaHQpXHJcbiAgICAgICAgICAgIGxldCBxdWFsaXR5ID0gd2lkdGggPj0gMTUwMCA/IDAuNSA6ICh3aWR0aCA+IDYwMCA/IDAuNiA6IDEpXHJcbiAgICAgICAgICAgIGxldCBuZXdJbWFnZURhdGEgPSBjdnMudG9EYXRhVVJMKG1pbWVUeXBlLCBxdWFsaXR5KVxyXG4gICAgICAgICAgICByZXNvbHZlKG5ld0ltYWdlRGF0YSB8fCBpbWcuc3JjKVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcblxyXG4vKiog6I635Y+W54Wn54mH55qERVhJRuS/oeaBr++8jOS4u+imgeaLv+adpeWIpOaWreeFp+eJh+aYr+WQpuaXi+i9rOS6hlxyXG4gKiBAcGFyYW0gIHtGSUxFfSBmaWxlIOaWh+S7tlxyXG4gKiBAcGFyYW0gIHtPYmplY3R9IGluZm89e30g5paH5Lu25L+h5oGvXHJcbiAqIEBwYXJhbSAge0FycmF5fSBrZXlzPVtdIOWPpuWklumcgOimgei/lOWbnueahEVYSUblrZfmrrVcclxuICogQHBhcmFtICB7Qm9vbGVhbn0gbmVlZEFsbD1mYWxzZSDmmK/lkKbopoHov5Tlm57lhajpg6jnmoRFWElU55qE5a2X5q61XHJcbiAqL1xyXG5mdW5jdGlvbiBhc3lSZWFkRmlsZUVYSUYoZmlsZSwgaW5mbyA9IHt9LCBrZXlzID0gW10sIG5lZWRBbGwgPSBmYWxzZSkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBFWElGLmdldERhdGEoZmlsZSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBsZXQgb3JpZW50YXRpb24gPSB0aGlzLmV4aWZkYXRhLk9yaWVudGF0aW9uXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFWElGJywgdGhpcy5leGlmZGF0YSlcclxuICAgICAgICAgICAgbGV0IHJvdGF0ZURlZyA9IDBcclxuICAgICAgICAgICAgaWYgKG9yaWVudGF0aW9uICE9PSB1bmRlZmluZWQgJiYgb3JpZW50YXRpb24gIT09IDEpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAob3JpZW50YXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDY6IC8vIOmhuuaXtumSiDkwwrBcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm90YXRlRGVnID0gOTAgKiBNYXRoLlBJIC8gMTgwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA4OiAvLyDpgIbml7bpkog5MMKwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdGF0ZURlZyA9IC05MCAqIE1hdGguUEkgLyAxODBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6IC8vIDE4MMKwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdGF0ZURlZyA9IDE4MCAqIE1hdGguUEkgLyAxODBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3RhdGVEZWcgPSAwXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvcmllbnRhdGlvbicsIG9yaWVudGF0aW9uKVxyXG4gICAgICAgICAgICBpZiAobmVlZEFsbCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihpbmZvLCB0aGlzLmV4aWZkYXRhKVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleXMubGVuZ3RoID4gMCkga2V5cy5mb3JFYWNoKGtleSA9PiB7IGluZm9ba2V5XSA9IHRoaXMuZXhpZmRhdGFba2V5XSB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGluZm8ucm90YXRlRGVnID0gcm90YXRlRGVnXHJcbiAgICAgICAgICAgIGluZm8ub3JpZW50YXRpb24gPSBvcmllbnRhdGlvblxyXG4gICAgICAgICAgICByZXNvbHZlKGluZm8pXHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn1cclxuXHJcbi8qKlxyXG4gKiDmiorpgInmi6nnmoTmlofku7YoZmlsZSnlj5jmiJDlm77niYcoaW1nKSDlpb3ojrflvpflroPnmoTlrr3luqbvvIzpq5jluqZcclxuICogQHBhcmFtIHsqfSBmaWxlXHJcbiAqL1xyXG5mdW5jdGlvbiBhc3lSZWFkRmlsZTJJbWcoZmlsZSkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoZmlsZSlcclxuICAgICAgICB2YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJylcclxuICAgICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaW1nLnNyYyA9IGUudGFyZ2V0LnJlc3VsdFxyXG4gICAgICAgICAgICByZXNvbHZlKGltZylcclxuICAgICAgICB9XHJcbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSlcclxuICAgIH0pXHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlRmlsZUlucHV0KGFjY2VwdCA9ICdpbWFnZS9qcGcsaW1hZ2UvanBlZyxpbWFnZS9wbmcsaW1hZ2UvZ2lmJykge1xyXG4gICAgbGV0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKVxyXG4gICAgaW5wdXQudHlwZSA9ICdmaWxlJ1xyXG4gICAgaW5wdXQuYWNjZXB0ID0gYWNjZXB0XHJcbiAgICByZXR1cm4gaW5wdXRcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gdXBsb2FkUWluaXUodXJsID0gJ2h0dHA6Ly91cGxvYWQucWluaXUuY29tLycsIHsgcGFyYW1zLCBvbnByb2dyZXNzIH0pIHtcclxuICAgIGxldCBmb3JtRGF0YSA9IG5ldyB3aW5kb3cuRm9ybURhdGEoKVxyXG4gICAgbGV0IGtleXMgPSBPYmplY3Qua2V5cyhwYXJhbXMpXHJcbiAgICBrZXlzLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoa2V5LCBwYXJhbXNba2V5XSlcclxuICAgIH0pXHJcbiAgICByZXR1cm4gdXBsb2FkRmlsZVhocih1cmwsIGZvcm1EYXRhLCBvbnByb2dyZXNzKVxyXG59XHJcbmV4cG9ydCBjb25zdCBnZXRFWElGID0gRVhJRlxyXG5leHBvcnQgZGVmYXVsdCB7XHJcbiAgICBEVl9PUklHX0NPTVAsXHJcbiAgICBNQVhGSUxFU0laRSxcclxuICAgIE1BWEZJTEVTSVpFVElUUCxcclxuICAgIHVwbG9hZEJhc2U2NCxcclxuICAgIHVwbG9hZEZpbGUsXHJcbiAgICB1cGxvYWRPcmlnaW5hbEZpbGUsXHJcbiAgICB1cGxvYWRDb21wcmVzc0ZpbGUsXHJcbiAgICB1cGxvYWRDb21wcmVzc0ZpbGVXaWR0aEV4aWYsXHJcbiAgICAvKiog6K+75Y+W5paH5Lu2IOi/lOWbnmJhc2U2NOS/oeaBr1xyXG4gICAgICogQHBhcmFtICB7RklMRX0gZmlsZVxyXG4gICAgICogQHBhcmFtICB7fSBpbmZvPXtiYXNlNjQsc2l6ZX1cclxuICAgICAqIEByZXR1cm4gUHJvbWlzZVxyXG4gICAgICovXHJcbiAgICByZWFkSW1hZ2VGaWxlKGZpbGUsIGluZm8gPSB7fSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCByZWFkZXIgPSBuZXcgd2luZG93LkZpbGVSZWFkZXIoKVxyXG4gICAgICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKVxyXG4gICAgICAgICAgICByZWFkZXIub25sb2FkZW5kID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpbmZvLmJhc2U2NCA9IGV2ZW50LnRhcmdldC5yZXN1bHRcclxuICAgICAgICAgICAgICAgIGluZm8uc2l6ZSA9IGZpbGUuc2l6ZVxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShpbmZvKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0sXHJcbiAgICBjb21wcmVzcyxcclxuICAgIGFzeVJlYWRGaWxlRVhJRixcclxuICAgIGFzeVJlYWRGaWxlMkltZyxcclxuICAgIGNyZWF0ZUZpbGVJbnB1dFxyXG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFFQTs7OztBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7Ozs7OztBQU1BO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQTdCQTtBQUNBO0FBOEJBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7Ozs7Ozs7QUFLQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBOzs7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBREE7QUFHQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFLQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7QUFNQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQVhBO0FBYUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTs7Ozs7QUFLQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBNUJBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/controllers/fileUpload.js\n");

/***/ })

}]);